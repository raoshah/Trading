{% extends 'layout.html' %}

{% block body %}
<h1>Auto Order place </h1>
<p>Order Not place Yet Checking...</p>
<p>Try <span id="count"></span> </p>
<h1>Nifty : <span id="status"></span></h1>
<script>
    let counter = 1
    function checkStatus() {
        fetch('/status') 
            .then(response => response.text())
            .then(data => {
                const statusElement = document.getElementById('status');
                const count = document.getElementById('count')
                statusElement.textContent = data;
                count.textContent = counter;
                if (data === 'true') {
                    
                    window.location.href = '/order';
                } else {
                    counter++
                    setTimeout(checkStatus, 2000); 
                }
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }
    checkStatus();
</script>


{% endblock %}